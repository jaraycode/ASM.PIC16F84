		LIST P=16F84A

; REGISTROS
STATUS		EQU		03H
TMR0		EQU		01H
OP			EQU		01H
INTCON		EQU		0BH
PA			EQU		05H
TRISA		EQU		05H
PB			EQU		06H
TRISB		EQU		06H

;REGISTROS OPCIONALES
PRESS1		EQU		10H
PRESS2		EQU		11H
PRESS3		EQU		12H
VAR			EQU		13H
SEG			EQU		14H

		ORG 0
		GOTO INI

INI		ORG 10;
		BSF		STATUS,5
		CLRF	TRISB
		MOVLW	B'00000111'
		MOVWF	TRISA
		MOVLW	B'00000111'
		MOVWF	OP
		BCF		STATUS,5
		CLRF	PB

BOTONES	CALL	PRESS1.1
		CALL	PRESS2.1
		CALL	PRESS3.1
		GOTO	BOTONES

PRESS1.1	BTFSS PA,0
			GOTO  X1
			RETURN
X1			BTFSC PB,1
			RETURN
			MOVLW	B'10100000'
			MOVWF	INTCON
			MOVLW	D'232'
			MOVWF	TMR0
			MOVLW	D'20'
			MOVWF	VAR
			MOVLW	D'5'
			MOVWF	SEG
			BSF		PB,4
			BSF		PB,7
			RETURN

PRESS2.1	BTFSS PA,1
			GOTO  X2
			RETURN
X2			BTFSC PB,4
			RETURN
			MOVLW	B'10100000'
			MOVWF	INTCON
			MOVLW	D'232'
			MOVWF	TMR0
			MOVLW	D'20'
			MOVWF	VAR
			MOVLW	D'10'
			MOVWF	SEG
			BSF		PB,1
			BSF		PB,7
			RETURN		

PRESS3.1	BTFSS PA,2
			GOTO  X3
			RETURN
X3			BTFSC PB,7
			RETURN
			MOVLW	B'10100000'
			MOVWF	INTCON
			MOVLW	D'232'
			MOVWF	TMR0
			MOVLW	D'20'
			MOVWF	VAR
			MOVLW	D'15'
			MOVWF	SEG
			BSF		PB,4
			BSF		PB,1
			RETURN			

		ORG 4;
		GOTO INTE

INTE 	ORG	80;
		DECFSZ	VAR,1
		GOTO 	E1
		DECFSZ	SEG,1
		GOTO	E2
		CALL 	OFF
		GOTO	E2

OFF		CLRF	PB
		RETURN

E2		MOVLW	D'20'
		MOVWF	VAR
E1		MOVLW	D'232'
		MOVWF	TMR0

		BCF		INTCON,2
		RETFIE
		END	

