		LIST	P=16F84
		
STATUS		EQU		03H
PA			EQU		05H
TRISA		EQU		05H
OP			EQU		01H
TMR0		EQU		01H
INTCON		EQU		0BH

; VARIABLES

VAR			EQU		10H
VAR2		EQU		11H


		ORG		0				; INICIO PROGRAMA
		GOTO	INICIO
		
INICIO	ORG		10				; IR A LINEA 10
		BSF		STATUS,5		; BANCO DE MEMORIA 1
		CLRF	TRISA			; ANCHAR A LA SALIDA
		MOVLW	B'00000110'
		MOVWF	OP
		BCF		STATUS,5		; BANCO DE MEMORIA 0
		
		MOVLW 	B'10100000'
		MOVWF	INTCON
		
		MOVLW	D'178'
		MOVWF	TMR0
		
		MOVLW	D'200'
		MOVWF	VAR
		
		MOVLW	D'45'
		MOVWF	VAR2

		BSF		PA,0			;	PRENDIENDO LED ROJO
		BCF		PA,1			;	APAGANDO LED AMARILLO
		BCF		PA,2			;	APAGANDO LED VERDE
		
		
X1		NOP
		NOP
		GOTO	X1
		
		ORG		04				; DESPUES DE DESBORDAMIENTO REGRESA A ESTA LINEA
		GOTO	MIN
		
MIN		ORG		60				; IR A LINEA 60
		DECFSZ	VAR,1			;	DECREMENTAR EL VALOR DE VAR CON -1
		GOTO	X2
		DECFSZ	VAR2,1			; 	DECREMENTAR EL VALOR DE VAR CON -1
		GOTO	X3
		BTFSC	PA,0			; 	VERIFICAR SI PUERTOA VALE 1
		GOTO	OFFR
		BTFSC	PA,1
		GOTO	OFFY
		BTFSC	PA,2
		GOTO	OFFG
		GOTO	X3
OFFR	BCF		PA,0			;	APAGAR LED ROJO
		BSF		PA,2			;	PRENDER LED VERDE
		MOVLW	D'30'
		MOVWF	VAR2
		GOTO	X3
OFFY	BCF		PA,1			;	APAGAR LED AMARILLO
		BSF		PA,0			;	PRENDER LED ROJO
		MOVLW	D'45'
		MOVWF	VAR2
		GOTO	X3
OFFG	BCF		PA,2			;	APAGAR LED VERDE
		BSF		PA,1			;	PRENDER LED AMARILLO
		MOVLW	D'3'
		MOVWF	VAR2
	
		
X3		MOVLW	D'200'
		MOVWF	VAR
		
X2		MOVLW	D'178'
		MOVWF	TMR0
		
		BCF		INTCON,2		; 	APAGAR BANDERA DE DESBORDAMIENTO
		RETFIE
		
		END						; 	FINAL DEL PROGRAMA